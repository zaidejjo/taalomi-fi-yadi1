{% extends 'base.html' %}
{% load static %}
{% block title %}Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ{% endblock %}

{% block content %}
<div class="container my-5" dir="rtl" lang="ar">
    <div class="row justify-content-center">
        <div class="col-md-10 col-lg-8">
            <div class="card shadow-sm border-0 rounded-4 overflow-hidden">
                <!-- Header -->
                <div class="card-header text-white text-center py-3" style="background-color: var(--navbar-bg, #0d6efd)">
                    <h3 class="mb-0 fw-bold">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h3>
                </div>

                <!-- Body -->
                <div class="card-body p-4 text-center">
                    <!-- ØµÙˆØ±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                    <div class="profile-img mb-3 mx-auto" style="width: 140px; height: 140px">
                        {% if profile_user.profile_image %}
                            <img src="{{ profile_user.profile_image.url }}" alt="ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ" class="rounded-circle shadow w-100 h-100" style="object-fit: cover" />
                        {% else %}
                            <img src="{% static 'images/default_profile.jfif' %}" alt="ØµÙˆØ±Ø© Ø§ÙØªØ±Ø§Ø¶ÙŠØ©" class="rounded-circle shadow w-100 h-100" style="object-fit: cover" />
                        {% endif %}
                    </div>

                    <!-- Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                    <h4 class="card-title fw-bold mb-1 text-dark">
                        {{ profile_user.get_full_name|default:profile_user.username }}
                    </h4>
                    <p class="text-dark small mb-3">@{{ profile_user.username }}</p>

                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                    <div class="info mx-auto text-start" style="max-width: 420px;">
                        <p class="mb-2 text-dark">
                            <strong>ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong>
                            {% if request.user == profile_user or request.user.is_staff %} {{ profile_user.email }} {% else %} **** {% endif %}
                        </p>
                        <p class="mb-2 text-dark">
                            <strong>ğŸ­ Ø§Ù„Ø¯ÙˆØ±:</strong>
                            <span class="badge bg-info text-dark">{{ profile_user.get_role_display }}</span>
                        </p>
                        <p class="mb-2 text-dark">
                            <strong>ğŸ†” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ÙˆØ·Ù†ÙŠ:</strong>
                            {% if not profile_user.national_id %} **** 
                            {% elif request.user.is_staff or request.user == profile_user %} {{ profile_user.national_id }} 
                            {% else %} ****{{ profile_user.national_id|slice:"-4:" }} {% endif %}
                        </p>
                        <p class="mb-2 text-dark">
                            <strong>ğŸ“… ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù…:</strong> {{ profile_user.date_joined|date:"Y-m-d" }}
                        </p>
                        <p class="mb-2 text-dark">
                            <strong>â° Ø¢Ø®Ø± ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„:</strong> {{ profile_user.last_login|date:"Y-m-d H:i" }}
                        </p>
                    </div>

                    <!-- Ø£Ø²Ø±Ø§Ø± -->
                    <div class="mt-4 d-flex justify-content-center flex-wrap gap-2">
                        <a href="{% url 'core:home' %}" class="btn btn-outline-primary">â¬… Ø§Ù„Ø¹ÙˆØ¯Ø©</a>
                        {% if request.user == profile_user %}
                            <a href="{% url 'core:profile_edit' profile_user.id %}" class="btn btn-primary">âœ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</a>
                            <a href="" class="btn btn-warning">ğŸ”‘ ØªØºÙŠÙŠØ± ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</a>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* ØµÙˆØ±Ø© Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ */
.profile-img img {
    border: 3px solid #ffffff;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.profile-img img:hover {
    transform: scale(1.05);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
}

/* Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„ÙƒØ§Ø±Ø¯ */
.card-body {
    background: #ffffff !important;
}
.card-title,
.info p,
.text-dark {
    color: #000 !important;
    font-size: 0.95rem;
}
.info p strong {
    font-weight: 600;
}

/* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
.btn {
    min-width: 130px;
    font-weight: 500;
    font-size: 0.9rem;
}

/* Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
.card {
    font-size: 0.95rem;
}

/* ØªØ¨Ø§Ø¹Ø¯ Ø¯Ø§Ø®Ù„ÙŠ Ù…Ù†Ø§Ø³Ø¨ */
.card-body p {
    margin-bottom: 0.5rem;
}

/* Ø¬Ø¹Ù„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…ØªÙ†Ø§ØºÙ…Ø© Ù…Ø¹ Ø§Ù„Ø®Ø·ÙˆØ· */
@media (max-width: 768px) {
    .profile-img {
        width: 120px !important;
        height: 120px !important;
    }
    .btn {
        min-width: 120px;
        font-size: 0.85rem;
    }
}
</style>
{% endblock %}
